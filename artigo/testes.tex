\chapter{Testes}
Três baterias de testes foram conduzidas ao longo da produção deste trabalho de graduação a fim de ver na prática o
impacto dos algoritmos de aprendizagem de máquina quando aplicados em bases de dados com informações de rede.
Em um dos testes, a base utilizada foi a supracitada KDD Cup 99. Para os outros, utilizou-se uma série de dados
 gerados pelo mestrando da PUC-PR Eduardo, orientado pelo Pr. Dr. Altair. Em ambos os casos, os algoritmos foram
 executados através do Weka.

\section{Weka}
O \textit{Waikato Environment for Knowledge Analysis} (Weka) é uma suíte de aplicações para aprendizagemd e máquina e
mineiração de dados. O software foi desenvolvido em Java na \textit{University of Waikato} e lincenciado sob a
\textit{GNU General Public License}. Os destaques dessa ferramenta incluem a vasta quantidade de algoritmos
implementados, pré-processamento de dados, seleção de atributos e visualização de dados. O Weka funciona como uma
interface, permitindo que novos algoritmos em Java sejam produzidos e facilmente executados de forma gráfica e com
resultados interativos \cite{bouckaert10}.

\section{Avaliação de Performance}
Gráficos ROC (\textit{Receiver Operating Characterístics}) são comumente usados como um método  para visualizar
a performance de classificadores e analisar as taxas de acertos e alarmes falsos \cite{fawcett04}. A Um gráfico ROC
baseia-se em apenas duas classes: positivo ou negativo. Em termos de detecção de intrusão, uma conexão pode ser
considerada inofensiva (positivo) ou prejudicial (negativa). Para avaliar a precisão de um classificador,
duas outras categorias podem ser usadas: verdadeiro ou falso. Quando cruzadas, obtém-se quatro possíveis resultados,
como mostra a tabela \ref{table:tfpn}.

\begin{table}[h]
    \begin{tabular}{l|l|l|}
        \cline{2-3}
                                                               & \cellcolor[HTML]{EFEFEF}Verdadeiro (T)                                                           & \cellcolor[HTML]{EFEFEF}Falso (F)                                                     \\ \hline
        \multicolumn{1}{|l|}{\cellcolor[HTML]{EFEFEF}Positivo} & \begin{tabular}[c]{@{}l@{}}TP -- Conexão inofensiva é \\ classificada corretamente\end{tabular}  & \begin{tabular}[c]{@{}l@{}}FP -- Conexão anômala é \\ considerada normal\end{tabular} \\ \hline
        \multicolumn{1}{|l|}{\cellcolor[HTML]{EFEFEF}Negativo} & \begin{tabular}[c]{@{}l@{}}TN -- Conexão prejudicial é \\ classificada corretamente\end{tabular} & \begin{tabular}[c]{@{}l@{}}FN -- Conexão normal é \\ considerada anômala\end{tabular} \\ \hline
    \end{tabular}
    \caption{My table}
    \label{table:tfpn}
\end{table}

Quando se sabe a verdadeira natureza dos casos de teste, é possível determinar a precisão, a taxa de Verdadeiro Positivo
 ($TP_{rate}$) e taca de Falso Positivo ($FP_{rate}$). É possível inferir que uma das maiores preocupações ao se construir
 um A-NIDS é a minimização a taxa de Falso Positivo. Teoricamente se 100\% das conexões forem consideradas anômalas
 e bloqueadas, teremos $FP_{rate}$ igual a 0. Por um lado, o sistema estaria bloqueando conexões inofensivas, por outro,
 estaria com certeza evitando conexões ameaçadores. O cálculo das taxas se dá da seguinte maneira.

\newpage

 $$ Precisão = \frac{TP + TN}{P + N} $$
 $$ TP_{rate} = \frac{TP}{P} $$
 $$ FP_{rate} = \frac{FP}{N} $$

Essas taxas estão contidas no espaço entre $0$ e $1$, inclusivo, e são utilizadas para plotar o ROC. A $TP_{rate}$ é
usado no eixo $y$ e a $FP_{rate}$, no eixo $x$. Portanto, o gráfico ROC elicita a relação entre Verdadeiro Positivo e
Falso Positivo.
\par A \ref{fig:roc} mostra uma curva ROC simples com 5 classificadores fictícios: A, B, C, D e E. Cada classificador
retorna um único ponto no espaço ROC. Se o ponto estiver localizado na coordenada (0,0), como o classificador A na
\ref{fig:roc}, significa que nenhum caso foi considerado inofensivo. Classificadores que se encontram próximos ao eixo
$y$ podem ser considerados "conservadores", uma vez que necessitam de forte evidência para categorizar uma ocorrência
como positiva. Em contrapartida, o ponto B, posicionado em (1,1), representa sistemas que não acusaria nenhuma
conexão como anômala. Classificadores mais À direita do gráfico podem ser considerados "liberais" pois presumem como
positivo mais facilmente.
\par Um classificador perfeito resultaria no ponto (0,1), onde C se encontra. Isso significaria possuir $FP_{rate}$ de
0\% e $TP_{rate}$ de 100\%, ou seja, todas as conexões intrusivas serem detectadas e nenhuma conexão normal ser
bloqueada pelo sistema. Assim sendo, quanto maior o $TP_{rate}$ e menor o $FP_{rate}$, mais preciso é o algoritmo.
 Se um classificador está localizado abaixo da linha diagonal ($y = x$), isto significa que sua performance é pior do
 que a escolha aleatória de classes. O triângulo inferior direito é geralmente encontrado vazio pois em casos de
 classificação binária com alta taxa de erro, é possível simplesmente inverter os resultados. Portanto, E (0.8,0.2)
 seria tão preciso quanto D(0.2,0.8)


\section{Impacto de modelos representativos}

\section{Impacto da imprevisibilidade}

\section{Impacto da seleção de atributos}
